apply plugin: 'java'
apply from: rootProject.file('dependencies.gradle')

sourceCompatibility = JavaVersion.VERSION_1_8

dependencies {
    compile slf4jApi()

    testCompile junit()
    testCompile mockitoCore()
    testCompile hamcrest()
}

test {
    testLogging {
        events "failed"
        exceptionFormat "full"
        showStackTraces true
    }
}

jar {
    baseName project.name
}

task sourcesJar(type: Jar, dependsOn: classes) {
    baseName project.name
    classifier = 'sources'

    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    baseName project.name
    classifier = 'javadoc'

    from javadoc.destinationDir
}

build.finalizedBy sourcesJar, javadocJar


if (project.hasProperty("DEPLOY_COMPONENT") && project.property("DEPLOY_COMPONENT") == "true") {
    apply from: rootProject.file('deploy-component.gradle')

}